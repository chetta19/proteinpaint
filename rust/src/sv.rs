// Syntax: cd ~/proteinpaint/rust && cargo build --release && json='[{"refseq":"GATGAGAAAACGGAATCACGCCGGGCGTGGGTGGCTCATGTCTGTAATCCCAGCACTTTGGGAGGCCAACAGGAGAATGGATCACTTGAGGCCAGGAGTTCAAGACCAGCCTGGCCAACATGGTGAAACCTTGTCTCCACTGAAAAAAAAAAAAAAATTAGCTAGGTATGGTGGCATGCGCCTGTAATCCAAGCTACTCGGGAGGCTGAGGCAGGAGGTGGAGGTTGCAGTGAGCTGAGATTACGCCACTGCACTCCAGCCTGGGCGACAGAGCGAGACTCTGTTTCAAAAAAAAATAAAGAAAACGAAGTTTCCACACCAACCATGAGAGTGGTGATAGGAATGAAAAAGGCCACCCGACCTCCCTCTGCTGGCCTCCCCGGCAGCACGCACCTGTCTCTGCAGTTGCCTCCTCTTCTCCTCATTCTGCTCGTCCCGGGCTTGGAGATCCCTTTCGAACTGGCCCTTGAGCGCCTGCATGTTGACTTCCAGCCGCAGTTTGGCGTCCTCCGTGGCTTGCAGCTCGTCCTCCAGCTCTTCCAGCTGCGTCTTCATCTCCTCCATCTGGGTCTCCAGGGCCCGCTTGGACTTCTCCAGCTCATGGACCTGCCGGCAGAGCGGGCAGCCCCATTCTATGAGGCTCAACTTCATGAAGACGATTGAGAAACCCACCGTGAGCGGCACCTCAGGAGATCAGGGAGGTGGCTTTGGCCTCCCACAGGATGCATGGCCGGGACTCAAGATGACCCCTGAGAGTTCAGACCCCAGCCTTATCCTCGGACCCCCCAACTCAGACCCATCCTCGACTGCCATTCTCAGCCCCTCCCAGCCCCTGCACCAGTCCAAAAACCTCCTTCCATTTCCGATGATAGTTCGCTATGAAAAAGGCCAGGAGCTAGCCTCGCATGGACTGGTGAATAGCACAGAGGGTGGGCAGGCGAAACATGGACGAGAAAAACCACCCAGAGCCACTTACGTTCTTGCCCACGTCATCCTTGGAGCTGACCAGGTCTTCCATTTCGGCTTTGAGCATTTTGTTGGTCCGCTCGAGTTCCTCTTTGGCTTCCAAGGCCTCTTCAAGGGCCCGAGCCAGGGACAGGGCCTTGGTTTCCTTCTCCCTGGCTTCTGCCTCAGCTCTGTCCCTCTCATCCGCGTATTTGGAAGAGATGTTTTTCTCCTCGGCTAACAACTACAACACAAGACCCAGAGGTGACTTCTAGGCATATCCGGGGTCAGCGTCACTGAATTGTAAATACCGGGGGAAGCCCTGTGTCCTGCTGAATGTATTGAGGTGCAGGTGTAAGCAGTGTAGGTTAGCTATGGGAGTAATTTATATAATCATCTGGCGTTCTGACTTCTACATCAACCTTATGCAGAGCCAGAAATCAGCTGACTTGTTTTTTTTTGTTGGTTTGTGTGTTTGTTTGTTTTAGATGGAGTCTCACTTTGTCACCCAGGCTGGAGTGCAATGGTGCAGTCTTGGTTCACTGCAACCTCCGCCTCGTGGGTTCAAGCGATTCTCCTGCCTCAGCCTCCAGAGTAGTTGGGATTACAGGTGCCCACCACCACACCTGGCTAATTTTTGTATTTTAAGTAGAGATGTGGTTTTGCCATGTTGACCAGGCTGGTCTCGAACTCCTGACCCTCAAGTGAGCCTCCTGCCTCGGCCTCCCAAAGCACGGAGATTACAGGTGTGAGCCACCACACCTGGCCAAATCCTTGTGCTTCGAAACCACTAGACCTGCCCACGTTGCTTAGAGCACACTGAGGTCAAAGTGAGATTTAAAGCTGCCAGAAGCTAGTTATTAGTTTGTTT","entries":[{"sam_info":"A00567:64:HKTFJDSXX:4:2445:10818:14121\t163\t16\t15814153\t60\t151M\t=\t15814512\t510\tGTCTCATACTCGTGAAGCTGGGCGAGGAATAGAGATGTGTGCTGCCCCACTTGCCCCTGGGAGGTCCTTTGGCTCACCTAGGCAGCACATCACTGCACCCCTTCCCCAGCACAGCCCCCTTGTGAGGTGGGCATCTCATCCCCAGTTGCAG\tFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF:FFFFF:FFFFFFFFFFFFF:FFFFFFFFFFFFFFFFFFF:FFFFFFF:FF\tX0:i:1\tX1:i:0\tMD:Z:151\tPG:Z:MarkDuplicates\tRG:Z:r1626484\tXG:i:0\tAM:i:37\tNM:i:0\tSM:i:37\tXM:i:0\tXO:i:0\tXT:A:U","tempscore":"","ridx":0},{"sam_info":"A00647:38:HL3LGDSXX:1:2463:15076:9846\t99\t16\t15814153\t60\t151M\t=\t15814386\t384\tGTCTCATACTCGTGAAGCTGGGCGAGGAATAGAGATGTGTGCTGCCCCACTTGCCCCTGGGAGGTCCTTTGGCTCACCTAGGCAGCACATCACTGCACCCCTTCCCCAGCACAGCCCCCTTGTGAGGTGGGCATCTCATCCCCAGTTGCAG\tFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF:FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF:FFF,FFFFFFFFFFFF\tX0:i:1\tX1:i:0\tMD:Z:151\tPG:Z:MarkDuplicates\tRG:Z:r1626506\tXG:i:0\tAM:i:37\tNM:i:0\tSM:i:37\tXM:i:0\tXO:i:0\tXT:A:U","tempscore":"","ridx":0},{"sam_info":"A00647:38:HL3LGDSXX:2:1401:7166:23171\t99\t16\t15814157\t60\t151M\t=\t15814297\t291\tCATACTCGTGAAGCTGGGCGAGGAATAGAGATGTGTGCTGCCCCACTTGCCCCTGGGAGGTCCTTTGGCTCACCTAGGCAGCACATCACTGCACCCCTTCCCCAGCACAGCCCCCTTGTGAGGTGGGCATCTCATCCCCAGTTGCAGATGA\tFFFFF:FFFFFFFFFFFFFFFFFFFFFFF::FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF,FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF:FFFFFFFFFFF\tX0:i:1\tX1:i:0\tMD:Z:151\tPG:Z:MarkDuplicates\tRG:Z:r1626508\tXG:i:0\tAM:i:37\tNM:i:0\tSM:i:37\tXM:i:0\tXO:i:0\tXT:A:U","tempscore":"","ridx":0}]}, {"refseq":"GATGAGAAAACGGAATCACGCCGGGCGTGGGTGGCTCATGTCTGTAATCCCAGCACTTTGGGAGGCCAACAGGAGAATGGATCACTTGAGGCCAGGAGTTCAAGACCAGCCTGGCCAACATGGTGAAACCTTGTCTCCACTGAAAAAAAAAAAAAAATTAGCTAGGTATGGTGGCATGCGCCTGTAATCCAAGCTACTCGGGAGGCTGAGGCAGGAGGTGGAGGTTGCAGTGAGCTGAGATTACGCCACTGCACTCCAGCCTGGGCGACAGAGCGAGACTCTGTTTCAAAAAAAAATAAAGAAAACGAAGTTTCCACACCAACCATGAGAGTGGTGATAGGAATGAAAAAGGCCACCCGACCTCCCTCTGCTGGCCTCCCCGGCAGCACGCACCTGTCTCTGCAGTTGCCTCCTCTTCTCCTCATTCTGCTCGTCCCGGGCTTGGAGATCCCTTTCGAACTGGCCCTTGAGCGCCTGCATGTTGACTTCCAGCCGCAGTTTGGCGTCCTCCGTGGCTTGCAGCTCGTCCTCCAGCTCTTCCAGCTGCGTCTTCATCTCCTCCATCTGGGTCTCCAGGGCCCGCTTGGACTTCTCCAGCTCATGGACCTGCCGGCAGAGCGGGCAGCCCCATTCTATGAGGCTCAACTTCATGAAGACGATTGAGAAACCCACCGTGAGCGGCACCTCAGGAGATCAGGGAGGTGGCTTTGGCCTCCCACAGGATGCATGGCCGGGACTCAAGATGACCCCTGAGAGTTCAGACCCCAGCCTTATCCTCGGACCCCCCAACTCAGACCCATCCTCGACTGCCATTCTCAGCCCCTCCCAGCCCCTGCACCAGTCCAAAAACCTCCTTCCATTTCCGATGATAGTTCGCTATGAAAAAGGCCAGGAGCTAGCCTCGCATGGACTGGTGAATAGCACAGAGGGTGGGCAGGCGAAACATGGACGAGAAAAACCACCCAGAGCCACTTACGTTCTTGCCCACGTCATCCTTGGAGCTGACCAGGTCTTCCATTTCGGCTTTGAGCATTTTGTTGGTCCGCTCGAGTTCCTCTTTGGCTTCCAAGGCCTCTTCAAGGGCCCGAGCCAGGGACAGGGCCTTGGTTTCCTTCTCCCTGGCTTCTGCCTCAGCTCTGTCCCTCTCATCCGCGTATTTGGAAGAGATGTTTTTCTCCTCGGCTAACAACTACAACACAAGACCCAGAGGTGACTTCTAGGCATATCCGGGGTCAGCGTCACTGAATTGTAAATACCGGGGGAAGCCCTGTGTCCTGCTGAATGTATTGAGGTGCAGGTGTAAGCAGTGTAGGTTAGCTATGGGAGTAATTTATATAATCATCTGGCGTTCTGACTTCTACATCAACCTTATGCAGAGCCAGAAATCAGCTGACTTGTTTTTTTTTGTTGGTTTGTGTGTTTGTTTGTTTTAGATGGAGTCTCACTTTGTCACCCAGGCTGGAGTGCAATGGTGCAGTCTTGGTTCACTGCAACCTCCGCCTCGTGGGTTCAAGCGATTCTCCTGCCTCAGCCTCCAGAGTAGTTGGGATTACAGGTGCCCACCACCACACCTGGCTAATTTTTGTATTTTAAGTAGAGATGTGGTTTTGCCATGTTGACCAGGCTGGTCTCGAACTCCTGACCCTCAAGTGAGCCTCCTGCCTCGGCCTCCCAAAGCACGGAGATTACAGGTGTGAGCCACCACACCTGGCCAAATCCTTGTGCTTCGAAACCACTAGACCTGCCCACGTTGCTTAGAGCACACTGAGGTCAAAGTGAGATTTAAAGCTGCCAGAAGCTAGTTATTAGTTTGTTT","entries":[{"sam_info":"A00567:64:HKTFJDSXX:4:2445:10818:14121\t163\t16\t15814153\t60\t151M\t=\t15814512\t510\tGTCTCATACTCGTGAAGCTGGGCGAGGAATAGAGATGTGTGCTGCCCCACTTGCCCCTGGGAGGTCCTTTGGCTCACCTAGGCAGCACATCACTGCACCCCTTCCCCAGCACAGCCCCCTTGTGAGGTGGGCATCTCATCCCCAGTTGCAG\tFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF:FFFFF:FFFFFFFFFFFFF:FFFFFFFFFFFFFFFFFFF:FFFFFFF:FF\tX0:i:1\tX1:i:0\tMD:Z:151\tPG:Z:MarkDuplicates\tRG:Z:r1626484\tXG:i:0\tAM:i:37\tNM:i:0\tSM:i:37\tXM:i:0\tXO:i:0\tXT:A:U","tempscore":"","ridx":0},{"sam_info":"A00647:38:HL3LGDSXX:1:2463:15076:9846\t99\t16\t15814153\t60\t151M\t=\t15814386\t384\tGTCTCATACTCGTGAAGCTGGGCGAGGAATAGAGATGTGTGCTGCCCCACTTGCCCCTGGGAGGTCCTTTGGCTCACCTAGGCAGCACATCACTGCACCCCTTCCCCAGCACAGCCCCCTTGTGAGGTGGGCATCTCATCCCCAGTTGCAG\tFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF:FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF:FFF,FFFFFFFFFFFF\tX0:i:1\tX1:i:0\tMD:Z:151\tPG:Z:MarkDuplicates\tRG:Z:r1626506\tXG:i:0\tAM:i:37\tNM:i:0\tSM:i:37\tXM:i:0\tXO:i:0\tXT:A:U","tempscore":"","ridx":0},{"sam_info":"A00647:38:HL3LGDSXX:2:1401:7166:23171\t99\t16\t15814157\t60\t151M\t=\t15814297\t291\tCATACTCGTGAAGCTGGGCGAGGAATAGAGATGTGTGCTGCCCCACTTGCCCCTGGGAGGTCCTTTGGCTCACCTAGGCAGCACATCACTGCACCCCTTCCCCAGCACAGCCCCCTTGTGAGGTGGGCATCTCATCCCCAGTTGCAGATGA\tFFFFF:FFFFFFFFFFFFFFFFFFFFFFF::FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF,FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF:FFFFFFFFFFF\tX0:i:1\tX1:i:0\tMD:Z:151\tPG:Z:MarkDuplicates\tRG:Z:r1626508\tXG:i:0\tAM:i:37\tNM:i:0\tSM:i:37\tXM:i:0\tXO:i:0\tXT:A:U","tempscore":"","ridx":0}]}]' && time echo "$json" | target/release/sv

use json::JsonValue;
use serde::{Deserialize, Serialize};
use serde_json;
use std::cmp::Ordering;
use std::io;

fn main() {
    let mut input = String::new();
    match io::stdin().read_line(&mut input) {
        // Accepting the piped input from nodejs (or command line from testing)
        #[allow(unused_variables)]
        Ok(n) => {
            //println!("{} bytes read", n);
            //println!("{}", input);
        }
        Err(error) => println!("Piping error: {}", error),
    }

    let input_json = json::parse(&input);

    match input_json {
        Ok(json_string) => {
            println!("Input json:{}", json_string)
        }
        Err(error) => println!("Incorrect json: {}", error),
    }
}
