<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>St. Jude Genome Paint</title>
	<meta name=keywords content="">
	<meta name=description content="St. Jude Children's Research Hospital - Pediatric Cancer Genomic Data Portal">
	<meta name=viewport content="width=device-width,initial-scale=1">
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
	<script src="https://proteinpaint.stjude.org/bin/proteinpaint.js" charset="utf-8"></script>
	<noscript>This page requires JavaScript. Please enable it in your browser settings.</noscript>
	<style>
		h2{
			font-family: Verdana, Geneva, sans-serif;
		}

		a{
			color:#555555;
		}

		a:hover{
			color: #901739;
		}

		.main-tabs{
			margin-left: 20px;
			margin-right: 20px;
		}

		.nav-pills .nav-link.active{
			color: #555555;
			background-color: rgb(204, 204, 204);
		}

		.tab-pane{
			margin: 50px;
		}

		.genome-home{
			margin: 50px 5%;
		}

		.user-data-form{
			width: 50%;
			margin: auto;
		}

		.btn-submit{
			color: #555555;
			background-color: rgb(204, 204, 204);
			border:0px solid transparent;
		}

		.btn-submit:hover{
			color: #901739;
			background-color: rgb(204, 204, 204);
			border:0px solid transparent;
		}

		#figures a, #userdata a{
			color: #901739;
		}

	</style>
</head>
<body>
	<nav class="navbar navbar-expand-lg">
			<img src="https://www.freelogovectors.net/wp-content/uploads/2018/03/st_jude_children_s_research_hospital-logo.png" height="40" class="d-inline-block align-top" alt="">
			<div class="tool-title" style="margin:auto;"><h2>GenomePaint</h2></div>
	</nav>

	<div style="margin:50px 0;">
		<div style="margin:auto;">
			<ul class="nav nav-tabs justify-content-center" id="myTab" role="tablist">
				<li class="nav-item">
					<a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true"><h5 class="main-tabs">Pediatric Cancer Dataset</h5></a>
				</li>
				<li class="nav-item">
					<a class="nav-link" id="userdata-tab" data-toggle="tab" href="#userdata" role="tab" aria-controls="userdata" aria-selected="false"><h5 class="main-tabs">Add Your Data</h5></a>
				</li>
				<li class="nav-item">
					<a class="nav-link" id="figures-tab" data-toggle="tab" href="#figures" role="tab" aria-controls="figures" aria-selected="false"><h5 class="main-tabs">Figures</h5></a>
				</li>
				<li class="nav-item">
					<a class="nav-link" id="tutorial-tab" data-toggle="tab" href="#tutorial" role="tab" aria-controls="tutorial" aria-selected="false" ><h5 class="main-tabs">Tutorial</h5></a>
				</li>
			</ul>
		</div>
			<div>
				<div class="tab-content" id="myTabContent" style="align-content: center;">
					<div class="tab-pane fade show active genome-home" id="home" role="tabpanel" aria-labelledby="home-tab">  
						<div id="PediatricCancer"></div>
				</div>
				<div class="tab-pane fade" id="userdata" role="tabpanel" aria-labelledby="userdata-tab">
					<form class="user-data-form" id="user-track-form">
						<div class="form-group row">
							<label for="genome" class="col-sm-4 col-form-label">Species & Genome</label>
							<div class="col-sm-8">
								<select class="custom-select mr-sm-2" id="genome">
									<option value="hg19">Human hg19</option>
									<option value="hg38" selected>Human hg38</option>
									<option value="mm9">Mouse mm9</option>
									<option value="mm10">Mouse mm10</option>
									<option value="danrer10">Zebrafish danRer10</option>
									<option value="dm3">Fruit fly dm3</option>
									<option value="dm6">Fruit fly dm6</option>
								</select>
							</div>
						</div>
						<div class="form-group row">
							<label for="track-name" class="col-sm-4 col-form-label">Track Name</label>
							<div class="col-sm-8">
								<input type="text" class="form-control" id="track-name" value="Demo Track">
							</div>
						</div>
						<div class="form-group row">
							<label for="svcnv" class="col-sm-4 col-form-label"><a href="https://docs.google.com/document/d/1owXUQuqw5hBHFERm0Ria7anKtpyoPBaZY_MCiXXf5wE/edit#heading=h.57qr5fp90wn9" target="_blank" data-toggle="tooltip" title="Click for help with file format"> SV, CNV File URL (required)</a></label>
							<div class="col-sm-8">
								<input type="url" class="form-control" id="svcnv" value="https://pecan.stjude.cloud/static/hg38/tcga-gdc/DLBC/TCGA_DLBC.CNV.gz" required>
							</div>
						</div>
						<div class="form-group row">
							<label for="vcf" class="col-sm-4 col-form-label"><a href="https://docs.google.com/document/d/1owXUQuqw5hBHFERm0Ria7anKtpyoPBaZY_MCiXXf5wE/edit#heading=h.hce6nejglfdx" target="_blank" data-toggle="tooltip" title="Click for help with file format"> VCF File URL (required)</a></label>
							<div class="col-sm-8">
								<input type="url" class="form-control" id="vcf" value="https://pecan.stjude.cloud/static/hg38/tcga-gdc/DLBC/TCGA_DLBC.vcf.gz" required>
							</div>
						</div>
						<div class="form-group row">
							<label for="fpkm" class="col-sm-4 col-form-label"><a href="https://docs.google.com/document/d/1owXUQuqw5hBHFERm0Ria7anKtpyoPBaZY_MCiXXf5wE/edit#heading=h.v8yrfg1dqvdy" target="_blank" data-toggle="tooltip" title="Click for help with file format">FPKM File URL (optional)</a></label>
							<div class="col-sm-8">
								<input type="url" class="form-control" id="fpkm" value="https://pecan.stjude.cloud/static/hg38/tcga-gdc/DLBC/TCGA_DLBC.fpkm.gz">
							</div>
						</div>
						<div style="text-align:center">
							<button id="usedata-btn" type="submit" class="btn btn-primary btn-submit" style="width: 100px; margin: 0 auto;">Submit</button>
						<div style="margin:40px">
							<h5>OR</h5>
							<h6 style="margin-top:10px"><a href="https://docs.google.com/document/d/1owXUQuqw5hBHFERm0Ria7anKtpyoPBaZY_MCiXXf5wE/edit#heading=h.62y4gp2dq4ud" target="_blank">Host and launch custom GenomePaint track from DNAnexus</a></h6>
						</div>
						<div style="margin:40px">
								<h5>OR</h5>
								<h6 style="margin-top:10px"><a href="https://docs.google.com/document/d/1TC6pcAByqugzMWQ0C7mhHIHIkIxkqqDt1ATBBt_ehes/edit" target="_blank">Tutorial on downloading data from NCI Genomic Data Commons and converting to custom tracks</a></h6>
							</div>
						</div>
					</form>
					<div>
						<button id="return-button" type="submit" class="btn btn-primary btn-submit" style="width: 200px; margin: 0 auto; display :none;">Return to the Form</button>
					</div>
					<div id="user-custom-track" class="tab-pane" style="display:none;"></div>
				</div>
				<div class="tab-pane fade" id="figures" role="tabpanel" aria-labelledby="figures-tab">
					<div class="col-md-10 offset-md-1">
						<ul class="list-group">
							<li class="list-group-item"><a href="https://proteinpaint.stjude.org/F/hg19/pediatric.mds.example/crebbp.splicesite.html" target="_blank"><strong>Figure 1:</strong> Navigating between the Cohort and the Sample View in GenomePaint to assess aberrant splicing in CREBBP caused by somatic splice site variant.</a>
							</li>
							<li class="list-group-item"><a href="https://proteinpaint.stjude.org/F/hg19/pediatric.mds.example/myc.enhancer.nalm6.html" target="_blank"><strong>Figure 2:</strong> MYC dysregulation by enhancer duplications in pediatric cancers.</a>
							</li>
							<li class="list-group-item"><a href="https://proteinpaint.stjude.org/F/hg19/pediatric.mds.example/ikzf1.tp53.html" target="_blank"><strong>Supplementary figure 1: </strong> Cohort View shows different mutation mechanisms causing loss-of-function in tumor suppressors.</a>
							</li>
							<li class="list-group-item"><a href="https://proteinpaint.stjude.org/F/hg19/pediatric.mds.example/tall.tal1.html" target="_blank"><strong>Supplementary figure 2:</strong> Illustrating TAL1-activating alterations with integrated view of DNA alterations and gene expression.</a>
							</li>
							<li class="list-group-item"><a href="https://proteinpaint.stjude.org/F/hg19/pediatric.mds.example/myc.nme.html" target="_blank"><strong>Supplementary figure 3:</strong> Linking MYC expression with the duplications of a distal enhancer.</a>
							</li>
							<li class="list-group-item"><a href="https://proteinpaint.stjude.org/F/hg19/pediatric.mds.example/tall.myb.survival.html" target="_blank"><strong>Supplementary figure 4:</strong> Kaplan-Meier plot shows MYB alterations are correlated with poor outcome in TALL patients.</a>
							</li>
							<li class="list-group-item"><a href="https://proteinpaint.stjude.org/F/hg19/pediatric.mds.example/aml.mdm2.html" target="_blank"><strong>Supplementary figure 5:</strong> MDM2 high expression correlates with poor outcome in acute myeloid leukemia (AML) patients.</a>
							</li>
							<li class="list-group-item"><a href="https://proteinpaint.stjude.org/F/hg19/pediatric.mds.example/matrix.mycnatrx.html" target="_blank"><strong>Supplementary figure 6:</strong> Mutual-exclusive pattern of MYCN and ATRX mutations in neuroblastoma (NBL).</a>
							</li>
							<li class="list-group-item"><a href="https://proteinpaint.stjude.org/F/hg19/pediatric.mds.example/tp53.splicesite.html" target="_blank"><strong>Supplementary figure 7:</strong> A TP53 splice site mutation from osteosarcoma causes intron retention.</a>
							</li>
							<li class="list-group-item"><a href="https://proteinpaint.stjude.org/F/hg19/pediatric.mds.example/myc.sv.nb69.html" target="_blank"><strong>Supplementary figure 8:</strong> MYC dysregulation by enhancer-hijacking in pediatric cancers.</a>
							</li>
							<li class="list-group-item"><a href="https://proteinpaint.stjude.org/F/hg19/pediatric.mds.example/os.apobec.html" target="_blank"><strong>Supplementary figure 9:</strong> APOBEC mutation mechanism causes kataegis in osteosarcoma.</a>
							</li>
							<li class="list-group-item"><a href="https://proteinpaint.stjude.org/F/hg19/pediatric.mds.example/crebbp.deletion.html" target="_blank"><strong>Supplementary figure 10:</strong> BALL shows diverse alterations targeting the RING domain of CREBBP.</a>
							</li>
							<li class="list-group-item"><a href="https://proteinpaint.stjude.org/F/hg19/pediatric.mds.example/myc.amp.html" target="_blank"><strong>Supplementary figure 11:</strong> MYC focal amplification is recurrent among pediatric solid tumors and brain tumors but not found in leukemia.</a>
							</li>
							<li class="list-group-item"><a href="https://proteinpaint.stjude.org/F/hg19/pediatric.mds.example/myc.enhancer.newcases.html" target="_blank"><strong>Supplementary figure 12:</strong> Previously unreported cases of likely MYC enhancer duplication/amplification in pediatric tumors and cell line.</a>
							</li>
							<li class="list-group-item"><a href="https://proteinpaint.stjude.org/F/hg19/pediatric.mds.example/myc.enhancer.nalm6.nalm16.html" target="_blank"><strong>Supplementary figure 13:</strong> In-situ Hi-C shows MYC interaction with duplicated enhancers in NALM6 and NALM16.</a>
							</li>
							<li class="list-group-item"><a href="https://proteinpaint.stjude.org/F/hg19/pediatric.mds.example/myc.enhancer.nalm6.phased.html" target="_blank"><strong>Supplementary figure 14:</strong> Phased sequencing coverage in NALM6.</a>
							</li>
							<li class="list-group-item"><a href="https://proteinpaint.stjude.org/F/hg38/pediatric.mds.example/tcga.dlbc.html" target="_blank"><strong>Supplementary figure 15:</strong> CDKN2A/2B focal deletion and sequence mutations from adult diffuse large B-cell lymphoma (DLBC).</a>
							</li>
							<li class="list-group-item"><a href="https://proteinpaint.stjude.org/F/hg38/pediatric.mds.example/tcga.skcm.html" target="_blank"><strong>Supplementary figure 16:</strong> TERT sequence mutations in adult cutaneous melanoma (SKCM).</a>
							</li>
						</ul>
					</div>
				</div>
				<div class="tab-pane fade" id="tutorial" role="tabpanel" aria-labelledby="tutorial-tab">
					<div>
						<h5 style="text-align:center;">GenomePaint User Tutorial</h5>
						<div class="col-md-8 offset-md-2">
							<a class="btn btn-submit col-md-4 offset-md-4" style="margin-top: 20px; margin-bottom: 20px;" href="https://docs.google.com/document/d/1owXUQuqw5hBHFERm0Ria7anKtpyoPBaZY_MCiXXf5wE/edit?usp=sharing" target="_blank">Open in Google Doc</a>
							<iframe src="https://docs.google.com/document/d/e/2PACX-1vShn3jGO7Q5AFUkRyjw8rksGkv1sOPKxOectzgiJvkRD4Dj2tsO7VtelNcVN9wbxK6TGudiDUf4Mn-5/pub?embedded=true" width="100%" height="800px"></iframe>
						</div>
					</div>
				</div>
				</div>
			</div>
		</div>
		<script>
			runproteinpaint({
				host:'https://proteinpaint.stjude.org',
				holder:document.getElementById('PediatricCancer'),
				parseurl:true,
				block:true,
				nobox:1,
				noheader:1,
				genome:'hg19',
				nativetracks:'RefGene',
				datasetqueries:[{dataset:'Pediatric2',querykey:'svcnv'}]
			})

			function ValidURL(str) {
				var pattern = new RegExp("((http|https)(:\/\/))?([a-zA-Z0-9]+[.]{1}){2}[a-zA-z0-9]+(\/{1}[a-zA-Z0-9]+)*\/?", "i"); 
				if(!pattern.test(str)) {
					alert("Please enter a valid URL.");
					return false;
				} else {
					return true;
				}
			}

			document.getElementById("usedata-btn").addEventListener("click", function(event){
				event.preventDefault();
				var genome_list = document.getElementById("genome");
				var genome_select = genome_list.options[genome_list.selectedIndex].value;
				var trackName = document.getElementById("track-name").value;
				var svcnv_url = document.getElementById("svcnv").value;
				var vcf_url = document.getElementById("vcf").value;
				var fpkm_url = document.getElementById("fpkm").value;
				var form = document.getElementById("user-track-form");
				var return_btn = document.getElementById("return-button");
				var genome_view = document.getElementById('user-custom-track');
				console.log(genome_select, trackName, svcnv_url, vcf_url, fpkm_url);
				genome_view.style.display = "block";
				
				if (svcnv_url == "" || vcf_url == ""){
					alert("Please provide required fields.");
					return false;
				} else if(ValidURL(svcnv_url) && ValidURL(vcf_url) && (fpkm_url !== "" && ValidURL(fpkm_url))){
					runproteinpaint({
						holder:document.getElementById('user-custom-track'),
						host:'https://proteinpaint.stjude.org',
						genome: genome_select,
						block:1,
						nobox:1,
						noheader:1,
						nativetracks:'refgene',
						tracks:[{
							name:trackName,
							type:'mdssvcnv',
							url:svcnv_url,
							checkexpressionrank:{url:fpkm_url},
							checkvcf:{url:vcf_url},
					}]
				})
					form.style.display = "none";
					return_btn.style.display = "block";
					// console.log(genome_select, trackName, svcnv, vcf, fpkm);
				}else{
					runproteinpaint({
						holder:document.getElementById('user-custom-track'),
						host:'https://proteinpaint.stjude.org',
						genome: genome_select,
						block:1,
						nobox:1,
						noheader:1,
						nativetracks:'refgene',
						tracks:[{
							name:trackName,
							type:'mdssvcnv',
							url:svcnv_url,
							checkvcf:{url:vcf_url},
					}]
				})
				form.style.display = "none";
				return_btn.style.display = "block";
				}
			});

			document.getElementById("return-button").addEventListener("click", function(event){
				event.preventDefault();
				var form = document.getElementById("user-track-form");
				var return_btn = document.getElementById("return-button");
				var genome_view = document.getElementById('user-custom-track');

				form.style.display = "block";
				genome_view.innerHTML = "";	
				this.style.display = "none";

			});
		</script>
</body>
</html>
