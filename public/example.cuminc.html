<!DOCTYPE html>
<html>
<head>
	 <meta charset="utf-8">
</head>
<body>

<script src="bin/proteinpaint.js" charset="utf-8"></script>

<noscript>This page requires JavaScript. Please enable it in your browser settings.</noscript>

<div id=exp style="margin:10px"></div>
<div id=aaa style="margin:10px"></div>

<script>
const termjson = {
	'Cardiac dysrhythmia': {
		id: 'Cardiac dysrhythmia',
		name: 'Cardiac dysrhythmia',
		parent_id: 'Arrhythmias',
		type: 'condition',
		graph: {
			barchart: {
				bar_choices: [
					{
						by_grade: true,
						label: 'Grades',
						allow_to_stackby_children: true
					},
					{
						by_children: true,
						label: 'Sub-conditions',
						allow_to_stackby_grade: true
					}
				],
				value_choices: [
					{
						max_grade_perperson: true,
						label: 'Max grade per patient'
					},
					{
						most_recent_grade: true,
						label: 'Most recent grade per patient'
					},
					{
						total_measured: true,
						label: 'Total number of patients'
					}
				]
			}
		},
		values: {
			'0': { label: '0: No condition' },
			'1': { label: '1: Mild' },
			'2': { label: '2: Moderate' },
			'3': { label: '3: Severe' },
			'4': { label: '4: Life-threatening' },
			'5': { label: '5: Death' },
			'9': { label: 'Unknown status', uncomputable: true }
		}
  }
}


runproteinpaint({
	holder:document.getElementById('exp'),
	parseurl:true,
	nobox:1,
	noheader:1,
	debug: 1,
	termdb:{
		state: {
			dslabel: 'SJLife',
			genome: 'hg38',
			nav: {
				header_mode: 'with_tabs',
				activeTab: 1,
			},
			activeCohort:0,
			tree: {
				expandedTermIds: [
					'root',
					'Clinically-assessed Variables',
					'ctcae_graded',
					'Cardiovascular System',
					'Arrhythmias',
					'Cardiac dysrhythmia'
				],
				visiblePlotIds: ['Cardiac dysrhythmia'],
				plots: {
					'Cardiac dysrhythmia': {
						term: {
							id: 'Cardiac dysrhythmia',
							term: termjson['Cardiac dysrhythmia'],
							q: { bar_by_grade: true, value_by_max_grade: true }
						}
					}
				}
			},
			termfilter: {
				filter: {
					type: 'tvslst',
					join: 'and',
					in: true,
					lst: [
						{
							type: 'tvs',
							tag: 'cohortFilter',
							tvs: {
								term: { id: 'subcohort', type: 'categorical' },
								values: [
									{ key: 'SJLIFE', label: 'SJLIFE' }
									//{key:'CCSS',label:'CCSS'},
								]
							}
						},
						{
							type: 'tvslst',
							tag: 'filterUiRoot',
							join: '',
							in: true,
							lst: [
								{
									type: 'tvs',
									tvs: {
										term: { id: 'sex', name: 'Sex', type: 'categorical' },
		 								values: [{ key: '1', label: 'Male' }]
									}
								}
							]
						}
					]
				}
			}
		},
	}
})

</script>

</body>
</html>
